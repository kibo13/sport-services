!function(){var e,t={8790:function(){$(".alert-success").delay(5e3).fadeOut("fast"),$(".alert-limit").delay(7e3).fadeOut("fast")},8496:function(){$(document).on("click",".bk-btn-info",(function(e){$(this).toggleClass("bk-btn-info--active");var t=$(this).children("i");$(t).hasClass("fa-eye")?($(t).removeClass("fa-eye"),$(t).addClass("fa-eye-slash")):($(t).removeClass("fa-eye-slash"),$(t).addClass("fa-eye"))}))},4671:function(){document.getElementById("is-datatable")&&$(".table").dataTable({language:{searchPlaceholder:"Поиск",sProcessing:"Подождите...",sLengthMenu:"Показать _MENU_ записей",sZeroRecords:"Записи отсутствуют.",sInfo:"Записи с _START_ до _END_ из _TOTAL_ записей",sInfoEmpty:"Записи с 0 до 0 из 0 записей",sInfoFiltered:"(отфильтровано из _MAX_ записей)",sInfoPostFix:"",sSearch:"Поиск:",sUrl:"",oPaginate:{sFirst:"Первая",sPrevious:"‹",sNext:"›",sLast:"Последняя"},oAria:{sSortAscending:": активировать для сортировки столбца по возрастанию",sSortDescending:": активировать для сортировки столбцов по убыванию"}},ordering:!0,columnDefs:[{orderable:!1,targets:"no-sort"}],lengthMenu:[[10,25,50,-1],["Показывать по 10","Показывать по 25","Показывать по 50","Все записи"]]})},5742:function(){$("[data-file=upload]").on("change",(function(e){this.previousElementSibling.value=this.value}))},6880:function(){$(document).on("click",".bk-btn-action--user",(function(e){var t=$(e.target).data("id"),n=$(e.target).data("full-name"),r=$(e.target).data("phone"),a=$(e.target).data("photo");$("#js-client-place-id").val(t),$("#js-client-full-name").val(n),$("#js-client-phone").val(r),$("#js-client-photo").attr("src",a)}))},9954:function(){$(document).on("click",".bk-btn-action--delete",(function(e){var t=$(e.target).data("table"),n=$(location).attr("pathname"),r=$(e.target).data("id");if("special"===t)$("#bk-delete-form").attr("action","".concat(n,"/destroy/").concat(r));else $("#bk-delete-form").attr("action","".concat(n,"/").concat(r))}))},1115:function(e,t,n){"use strict";n.r(t);var r=n(1909);$(document).on("click",".bk-btn-action--plus",(function(e){var t=$(e.target).data("id");$("#js-place-id").val(t),(0,r.x)("js-place-client-id","/api/clients/search",(function(e){return"".concat(e.full_name)}))}))},3111:function(){var e=document.getElementById("sidebar");document.getElementById("sidebar-toggle").onclick=function(){e.classList.toggle("sidebar--active")}},9055:function(e,t,n){"use strict";n.r(t),n.d(t,{tag:function(){return r}});var r={event:function(e){return'\n            <ul>\n                <li class="font-weight-bold">Событие</li>\n                <li>'.concat(e.title,'</li>\n                <li class="font-weight-bold">Вид</li>\n                <li>').concat(e.type,'</li>\n                <li class="font-weight-bold">Тренер</li>\n                <li>').concat(e.trainer,'</li>\n                <li class="font-weight-bold">Место проведения</li>\n                <li>').concat(e.place,"</li>\n            </ul>\n        ")},timetable:function(e){return"\n            <ul>\n                <li>\n                    <strong>Группа: </strong>\n                    <span>".concat(e.group,"</span>\n                </li>\n                <li>\n                    <strong>Категория: </strong>\n                    <span>").concat(e.category,"</span>\n                </li>\n                <li>\n                    <strong>Кабинет: </strong>\n                    <span>").concat(e.room,"</span>\n                </li>\n                <li>\n                    <strong>Время занятия: </strong>\n                    <span>").concat(e.title,"</span>\n                </li>\n                <li>\n                    <strong>Руководитель: </strong>\n                    <span>").concat(e.teacher,"</span>\n                </li>\n            </ul>\n        ")}}},3498:function(e,t,n){"use strict";n.r(t),n.d(t,{calc:function(){return r}});var r={age:function(e){var t=new Date,n=new Date(e),r=t.getFullYear()-n.getFullYear(),a=t.getMonth()-n.getMonth();return a<0||0===a&&t.getDate()<n.getDate()?r--:r},fullAge:function(e){var t=new Date-new Date(e);return Math.floor(t/1e3/60/60/24/365)}}},4236:function(e,t,n){"use strict";n.r(t),n.d(t,{compare:function(){return r}});var r={dates:function(e,t,n){var r=new Date(e),a=new Date(t);r.getTime()>=a.getTime()&&(n.preventDefault(),alert("Дата окончания не должна предшествовать дате начала"))}}},5996:function(){document.querySelector(".is-validation")&&($(".is-string").on("input",(function(){this.value=this.value.replace(/[^а-яё ]/gi,"")})),$(".is-number").on("input",(function(){this.value=this.value.replace(/\D/g,"")})),$(".is-float").on("input",(function(){this.value=this.value.replace(/[^0-9.]/g,"")})),$(".is-count").on("input",(function(){this.value=this.value.replace(/^0|\D/g,"")})),$(".is-phone").on("input",(function(){this.value=this.value.replace(/[^0-9 +]/g,"")})))},7148:function(e,t,n){n(3111),n(4671),n(9954),n(1115),n(6880),n(8790),n(8496),n(5742),n(9055),n(5996),n(3498),n(4236),n(1191),n(2601),n(5891),n(9241),n(9612)},5891:function(){if(document.getElementById("payment-form")){var e=function(){$("#client_id").val(null).trigger("change"),$("#client_id").select2("destroy"),$("#client_id").select2()},t=function(){f=0,u.value=0,s.innerText="",d.innerText="",l.innerText="".concat(c.value," ₽")},n=function(){var e=c.value,t=Math.ceil(c.value*f);d.innerText="".concat(100*f,"%"),s.innerText="".concat(t," ₽"),u.value=t,c.value=c.value-u.value,l.innerHTML='\n            <ul>\n                <li style="text-decoration: line-through;">'.concat(e,' ₽</li>\n                <li class="text-danger" style="font-size: 20px;">').concat(c.value," ₽</li>\n            </ul>\n        ")},r=document.getElementById("js-client-block"),a=document.getElementById("js-discount-block"),o=document.getElementById("activity_id"),i=document.getElementById("service_id"),c=document.getElementById("amount"),l=document.getElementById("js-amount-text"),u=document.getElementById("discount"),s=document.getElementById("js-discount-text"),d=document.getElementById("js-discount-tip"),f=0;$(".payment-input").on("change",(function(){$(".alert").addClass("d-none"),o.value=$(this).data("activity"),i.value=$(this).data("service"),c.value=$(this).data("price"),l.innerText="".concat(c.value," ₽"),1==$(this).data("type")?(t(),e(),r.classList.add("d-none"),$("#client_id").attr("required",!1),a.classList.add("d-none")):(r.classList.remove("d-none"),$("#client_id").attr("required",!0),a.classList.remove("d-none")),f&&n()})),$("#client_id").select2().on("change",(function(){var e=$(this).find("option:selected");(f=e.data("discount"))&&n()}))}},2601:function(){document.getElementById("profile-form")&&($.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("#profile-photo").on("change",(function(){var e=this.files[0];if(e){var t=new FormData;t.append("photo",e),$.ajax({url:"/profile/photo/update",type:"POST",data:t,processData:!1,contentType:!1,success:function(e){return $("#photo").attr("src",e.photo)}})}})))},9612:function(e,t,n){"use strict";n.r(t);var r=n(4236);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}if(document.getElementById("report-index")){var i=document.getElementById("report-menu"),c=document.getElementsByClassName("js-report-form");$(i).on("change",(function(e){var t,n=e.target.options[i.selectedIndex].value,r=a(c);try{for(r.s();!(t=r.n()).done;){var o=t.value;n==o.id?o.classList.remove("d-none"):o.classList.add("d-none")}}catch(e){r.e(e)}finally{r.f()}}));var l,u=a(c);try{var s=function(){var e=l.value;$("#".concat(e.id," button")).on("click",(function(t){var n=$("#".concat(e.id," #report-from")).val(),a=$("#".concat(e.id," #report-till")).val();r.compare.dates(n,a,t)}))};for(u.s();!(l=u.n()).done;)s()}catch(e){u.e(e)}finally{u.f()}}},9241:function(e,t,n){"use strict";n.r(t);var r=n(4236);document.getElementById("statistic-index")&&$("#stat-run").on("click",(function(e){var t=$("#stat-from").val(),n=$("#stat-till").val();r.compare.dates(t,n,e)}))},1191:function(){if(document.getElementById("user-form")){var e={admin:[".service_read",".card_read",".timetable_read",".lesson_full",".group_read",".group_full",".client_read",".client_full",".trainer_read",".trainer_full",".report_read"],director:[".benefit_read",".pay_read",".specialization_read",".education_read",".service_read",".card_read",".timetable_read",".group_read",".client_read",".medical_read",".trainer_read",".event_read",".report_read",".stat_read"],paymaster:[".benefit_read",".pay_read",".pay_full",".service_read",".service_full",".card_read",".card_full",".option_read",".option_full"],instructor:[".service_read",".timetable_read",".group_read",".event_read",".event_full"],doctor:[".service_read",".client_read",".medical_read",".medical_full",".trainer_read"],methodist:[".service_read",".timetable_read",".timetable_full"],client:[".service_read",".timetable_read",".lesson_read",".trainer_read"]};$("#role").on("change",(function(t){var n=$(this).find(":selected").data("slug"),r=e[n];r&&($(".bk-form__checkbox").prop("checked",!1),r.forEach((function(e){return $(e).prop("checked",!0)})))}))}},1909:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t,n){$("#"+e).select2({ajax:{url:t,dataType:"json",data:function(e){var t={search:e.term,type:"public"};return""!==$.trim(e.term)?t:null},processResults:function(e){return"object"===r(e)?{results:e.map((function(e){return{id:e.id,text:n(e)}}))}:(console.error("Unexpected data type received:",r(e)),{results:[]})}}})}n.d(t,{x:function(){return a}})},2840:function(){},3003:function(){},6582:function(){}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.m=t,e=[],r.O=function(t,n,a,o){if(!n){var i=1/0;for(s=0;s<e.length;s++){n=e[s][0],a=e[s][1],o=e[s][2];for(var c=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(r.O).every((function(e){return r.O[e](n[l])}))?n.splice(l--,1):(c=!1,o<i&&(i=o));if(c){e.splice(s--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[n,a,o]},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={467:0,780:0,703:0,603:0,766:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,o,i=n[0],c=n[1],l=n[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(a in c)r.o(c,a)&&(r.m[a]=c[a]);if(l)var s=l(r)}for(t&&t(n);u<i.length;u++)o=i[u],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(s)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),r.O(void 0,[703,603,766],(function(){return r(7148)})),r.O(void 0,[703,603,766],(function(){return r(2840)})),r.O(void 0,[703,603,766],(function(){return r(3003)}));var a=r.O(void 0,[703,603,766],(function(){return r(6582)}));a=r.O(a)}();